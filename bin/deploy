#!/bin/bash
# Homebrew does not allow sudo.

set -eu

bin/setup

mitamae() {
  cookbooks=$@
  case "$(uname)" in
    "Darwin")  bin/mitamae local $cookbooks ;;
    *) sudo -i bash -c "cd $(pwd) && bin/mitamae local lib/recipe_helper.rb $cookbooks" ;;
  esac
}

if [ "$1" = "" ]; then
  mitamae lib/recipe.rb
else
  mitamae $@
fi
